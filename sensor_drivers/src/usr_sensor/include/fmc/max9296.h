/****************************************************************************
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2025 Advanced Micro Devices, Inc. All right reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 *
 ****************************************************************************/
#ifndef __XYLON_FMC_9296_H__
#define __XYLON_FMC_9296_H__

#include <isi/isi_fmc.h>
#include "hal/hal_i2c.h"

#if defined(AMP_COMMON_I2C_CONTROLLER) || defined(AMP_MULTIPLE_I2C_CONTROLLER)
#include "spinlock_address_map.h"
extern u32 *FMC_INIT_STATUS_REG;
extern u32 *SHARED_DES_ARRAY_SRUCT;
#endif

extern struct serializer_driver max9295_instance[];
extern struct sensor_driver sensor_instance[];

#define MAX929X_TABLE_END	(0xffff)
#define MAX929X_TABLE_WAIT	(0xfffe)
#define MAX929X_TABLE_WAIT_MS	(210)
#define NUM_INTERATION		(3)

typedef struct {
	int num_of_serailizer;
	int num_of_deserializer;
	int SlaveAddress;
} Xylon_Context_t;

RegI2CT Des1_init[] = {
};

RegI2CT Des7_init[] = {
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{0x0050, 0x00},
	{0x0051, 0x01},
	{0x0052, 0x02},
	{0x0053, 0x03},
	{0x0320, 0x2F},
	{0x0323, 0x20},
	{0x0316, 0xAC},
	{0x0317, 0xBB},
	{0x0318, 0xB0},
	{0x0319, 0x6A},
	{0x0313, 0x62},
	{0x031A, 0x30},
	{0x0333, 0x1E},
	{0x040A, 0x10},
	{0x044A, 0xD0},
	{0x048A, 0x10},
	{0x04CA, 0x10},
	{0x044B, 0x07},
	{0x046D, 0x15},
	{0x044D, 0x2B},
	{0x044E, 0x2B},
	{0x044F, 0x00},
	{0x0450, 0x00},
	{0x0451, 0x01},
	{0x0452, 0x01},
	{0x048B, 0x07},
	{0x04AD, 0x15},
	{0x048D, 0x2C},
	{0x048E, 0x6C},
	{0x048F, 0x00},
	{0x0490, 0x40},
	{0x0491, 0x01},
	{0x0492, 0x41},
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{MAX929X_TABLE_END, 0}
};

RegI2CT Des2_init[] = {
#ifdef AB_MODE
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{0x0050, 0x00},
	{0x0051, 0x01},
	{0x0052, 0x02},
	{0x0053, 0x03},
	{0x0320, 0x21},
	{0x0323, 0x20},
	{0x0316, 0xAC},
	{0x0317, 0xBB},
	{0x0318, 0xB0},
	{0x0319, 0x6A},
	{0x0313, 0x62},
	{0x031A, 0x30},
	{0x0333, 0x8D},
	{0x040A, 0x10},
	{0x044A, 0x50},
	{0x048A, 0x10},
	{0x04CA, 0x10},
	{0x044B, 0x07},
	{0x046D, 0x15},
	{0x044D, 0x2B},
	{0x044E, 0x2B},
	{0x044F, 0x00},
	{0x0450, 0x00},
	{0x0451, 0x01},
	{0x0452, 0x01},
	{0x048B, 0x07},
	{0x04AD, 0x15},
	{0x048D, 0x2C},
	{0x048E, 0x6C},
	{0x048F, 0x00},
	{0x0490, 0x40},
	{0x0491, 0x01},
	{0x0492, 0x41},
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{MAX929X_TABLE_END, 0}
#else
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{0x0050, 0x00},
	{0x0051, 0x01},
	{0x0052, 0x02},
	{0x0053, 0x03},
	{0x0320, 0x2f},
	{0x0323, 0x20},
	{0x0316, 0xAC},
	{0x0317, 0xBC},
	{0x0318, 0xB0},
	{0x0319, 0x6C},
	{0x0313, 0x62},
	{0x031A, 0x30},
	{0x0333, 0x8D},
	{0x040A, 0x50},
	{0x044A, 0x50},
	{0x048A, 0x50},
	{0x04CA, 0x50},
	{0x044B, 0x07},
	{0x046D, 0x15},
	{0x044D, 0x2C},
	{0x044E, 0x2C},
	{0x044F, 0x00},
	{0x0450, 0x00},
	{0x0451, 0x01},
	{0x0452, 0x01},
	{0x048B, 0x07},
	{0x04AD, 0x15},
	{0x048D, 0x2C},
	{0x048E, 0x6C},
	{0x048F, 0x00},
	{0x0490, 0x40},
	{0x0491, 0x01},
	{0x0492, 0x41},
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{MAX929X_TABLE_END, 0}
#endif
};

RegI2CT Des3_init[] = {
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{0x0050, 0x00},
	{0x0051, 0x01},
	{0x0052, 0x02},
	{0x0053, 0x03},
	{0x0320, 0x2f},
	{0x0323, 0x2f},
	{0x0316, 0xAC},
	{0x0317, 0xBC},
	{0x0318, 0xB0},
	{0x0319, 0x6C},
	{0x0313, 0x62},
	{0x031A, 0x30},
	{0x0333, 0x1E},
	{0x0334, 0xC6},
	{0x040A, 0x10},
	{0x044A, 0x10},
	{0x048A, 0x10},
	{0x04CA, 0x10},
	{0x044B, 0x07},
	{0x046D, 0x2A},
	{0x044D, 0x2C},
	{0x044E, 0x2C},
	{0x044F, 0x00},
	{0x0450, 0x00},
	{0x0451, 0x01},
	{0x0452, 0x01},
	{0x048B, 0x07},
	{0x04AD, 0x2A},
	{0x048D, 0x2C},
	{0x048E, 0x6C},
	{0x048F, 0x00},
	{0x0490, 0x40},
	{0x0491, 0x01},
	{0x0492, 0x41},
	{0x001c, 0xff}
};

RegI2CT Des4_init[] = {
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{0x0050, 0x00},
	{0x0051, 0x01},
	{0x0052, 0x02},
	{0x0053, 0x03},
	{0x0320, 0x2f},
	{0x0323, 0x20},
	{0x0316, 0xAC},
	{0x0317, 0xBC},
	{0x0318, 0xB0},
	{0x0319, 0x6C},
	{0x0313, 0x62},
	{0x031A, 0x30},
	{0x0333, 0x6c},
	{0x040A, 0x50},
	{0x044A, 0x50},
	{0x048A, 0x50},
	{0x04CA, 0x50},
	{0x044B, 0x07},
	{0x046D, 0x15},
	{0x044D, 0x2C},
	{0x044E, 0x2C},
	{0x044F, 0x00},
	{0x0450, 0x00},
	{0x0451, 0x01},
	{0x0452, 0x01},
	{0x048B, 0x07},
	{0x04AD, 0x15},
	{0x048D, 0x2C},
	{0x048E, 0x6C},
	{0x048F, 0x00},
	{0x0490, 0x40},
	{0x0491, 0x01},
	{0x0492, 0x41},
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{MAX929X_TABLE_END, 0}
};

RegI2CT Des5_init[] = {
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{0x0050, 0x00},
	{0x0051, 0x01},
	{0x0052, 0x02},
	{0x0053, 0x03},
	{0x0320, 0x21},
	{0x0323, 0x21},
	{0x0316, 0xAC},
	{0x0317, 0xBC},
	{0x0318, 0xB0},
	{0x0319, 0x6C},
	{0x0313, 0x62},
	{0x031A, 0x30},
	{0x0333, 0x1E},
	{0x0334, 0xE4},
	{0x040A, 0xD0},
	{0x044A, 0xD0},
	{0x048A, 0xD0},
	{0x04CA, 0xD0},
	{0x044B, 0x07},
	{0x046D, 0x15},
	{0x044D, 0x2C},
	{0x044E, 0x2C},
	{0x044F, 0x00},
	{0x0450, 0x00},
	{0x0451, 0x01},
	{0x0452, 0x01},
	{0x048B, 0x07},
	{0x04AD, 0x2A},
	{0x048D, 0x2C},
	{0x048E, 0x2C},
	{0x048F, 0x00},
	{0x0490, 0x00},
	{0x0491, 0x01},
	{0x0492, 0x01},
	{0x001c, 0xff}
};

RegI2CT Des6_init[] = {
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{0x0050, 0x00},
	{0x0051, 0x01},
	{0x0052, 0x02},
	{0x0053, 0x03},
	{0x0320, 0x21},
	{0x0323, 0x20},
	{0x0316, 0xAC},
	{0x0317, 0xBB},
	{0x0318, 0xB0},
	{0x0319, 0x6A},
	{0x0313, 0x62},
	{0x031A, 0x30},
	{0x0333, 0x4E},
	{0x040A, 0x10},
	{0x044A, 0xD0},
	{0x048A, 0x10},
	{0x04CA, 0x10},
	{0x044B, 0x07},
	{0x046D, 0x15},
	{0x044D, 0x2B},
	{0x044E, 0x2B},
	{0x044F, 0x00},
	{0x0450, 0x00},
	{0x0451, 0x01},
	{0x0452, 0x01},
	{0x048B, 0x07},
	{0x04AD, 0x15},
	{0x048D, 0x2C},
	{0x048E, 0x6C},
	{0x048F, 0x00},
	{0x0490, 0x40},
	{0x0491, 0x01},
	{0x0492, 0x41},
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{MAX929X_TABLE_END, 0}
};

RegI2CT Des2_revserse_splitter_init[] = {
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{0x0050, 0x00},
	{0x0051, 0x01},
	{0x0052, 0x02},
	{0x0053, 0x03},
	{0x0320, 0x2F},
	{0x0323, 0x20},
	{0x0316, 0xAC},
	{0x0317, 0xBC},
	{0x0318, 0xB0},
	{0x0319, 0x6C},
	{0x0313, 0x62},
	{0x031A, 0x30},
	{0x0333, 0x1E},
	{0x040A, 0x10},
	{0x044A, 0xD0},
	{0x04CA, 0x10},
	{0x044B, 0x07},
	{0x046D, 0x15},
	{0x044D, 0x2C},
	{0x044E, 0x2C},
	{0x044F, 0x00},
	{0x0450, 0x00},
	{0x0451, 0x01},
	{0x0452, 0x01},
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{0x048A, 0xD0},
	{0x048B, 0x07},
	{0x04AD, 0x15},
	{0x048D, 0x2C},
	{0x048E, 0x6C},
	{0x048F, 0x00},
	{0x0490, 0x40},
	{0x0491, 0x01},
	{0x0492, 0x41},
	{0x001c, 0xff},
	{MAX929X_TABLE_WAIT, MAX929X_TABLE_WAIT_MS},
	{MAX929X_TABLE_END, 0}
};

static int xylon_IsiCreateFmcIss(void);
static int xylon_Fmc_Setup(int des_arr_id);
static int xylon_Deser_setup(desInterface *des);
static int xylon_Deser_Enable(u8 pos);
static int xylon_Deser_Disable(u8 pos);
void Remapping_I2C_addressess(desInterface *desIface);

#endif
